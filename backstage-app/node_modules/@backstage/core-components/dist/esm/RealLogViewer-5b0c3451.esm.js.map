{"version":3,"file":"RealLogViewer-5b0c3451.esm.js","sources":["../../src/components/LogViewer/AnsiProcessor.ts","../../src/components/LogViewer/styles.ts","../../src/components/LogViewer/LogLine.tsx","../../src/components/LogViewer/LogViewerControls.tsx","../../src/components/LogViewer/useLogViewerSearch.tsx","../../src/components/LogViewer/useLogViewerSelection.tsx","../../src/components/LogViewer/RealLogViewer.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ansiRegexMaker from 'ansi-regex';\n\nconst ansiRegex = ansiRegexMaker();\nconst newlineRegex = /\\n\\r?/g;\n\n// A mapping of how each escape code changes the modifiers\nconst codeModifiers = Object.fromEntries(\n  Object.entries({\n    1: m => ({ ...m, bold: true }),\n    3: m => ({ ...m, italic: true }),\n    4: m => ({ ...m, underline: true }),\n    22: ({ bold: _, ...m }) => m,\n    23: ({ italic: _, ...m }) => m,\n    24: ({ underline: _, ...m }) => m,\n    30: m => ({ ...m, foreground: 'black' }),\n    31: m => ({ ...m, foreground: 'red' }),\n    32: m => ({ ...m, foreground: 'green' }),\n    33: m => ({ ...m, foreground: 'yellow' }),\n    34: m => ({ ...m, foreground: 'blue' }),\n    35: m => ({ ...m, foreground: 'magenta' }),\n    36: m => ({ ...m, foreground: 'cyan' }),\n    37: m => ({ ...m, foreground: 'white' }),\n    39: ({ foreground: _, ...m }) => m,\n    90: m => ({ ...m, foreground: 'grey' }),\n    40: m => ({ ...m, background: 'black' }),\n    41: m => ({ ...m, background: 'red' }),\n    42: m => ({ ...m, background: 'green' }),\n    43: m => ({ ...m, background: 'yellow' }),\n    44: m => ({ ...m, background: 'blue' }),\n    45: m => ({ ...m, background: 'magenta' }),\n    46: m => ({ ...m, background: 'cyan' }),\n    47: m => ({ ...m, background: 'white' }),\n    49: ({ background: _, ...m }) => m,\n  } as Record<string, (m: ChunkModifiers) => ChunkModifiers>).map(\n    ([code, modifier]) => [`\\x1b[${code}m`, modifier],\n  ),\n);\n\nexport type AnsiColor =\n  | 'black'\n  | 'red'\n  | 'green'\n  | 'yellow'\n  | 'blue'\n  | 'magenta'\n  | 'cyan'\n  | 'white'\n  | 'grey';\n\nexport interface ChunkModifiers {\n  foreground?: AnsiColor;\n  background?: AnsiColor;\n  bold?: boolean;\n  italic?: boolean;\n  underline?: boolean;\n}\n\nexport interface AnsiChunk {\n  text: string;\n  modifiers: ChunkModifiers;\n}\n\nexport class AnsiLine {\n  text: string;\n\n  constructor(\n    readonly lineNumber: number = 1,\n    readonly chunks: AnsiChunk[] = [],\n  ) {\n    this.text = chunks\n      .map(c => c.text)\n      .join('')\n      .toLocaleLowerCase('en-US');\n  }\n\n  lastChunk(): AnsiChunk | undefined {\n    return this.chunks[this.chunks.length - 1];\n  }\n\n  replaceLastChunk(newChunks?: AnsiChunk[]) {\n    if (newChunks) {\n      this.chunks.splice(this.chunks.length - 1, 1, ...newChunks);\n      this.text = this.chunks\n        .map(c => c.text)\n        .join('')\n        .toLocaleLowerCase('en-US');\n    }\n  }\n}\n\nexport class AnsiProcessor {\n  private text: string = '';\n  private lines: AnsiLine[] = [];\n\n  /**\n   * Processes a chunk of text while keeping internal state that optimizes\n   * subsequent processing that appends to the text.\n   */\n  process(text: string): AnsiLine[] {\n    if (this.text === text) {\n      return this.lines;\n    }\n\n    if (text.startsWith(this.text)) {\n      const lastLineIndex = this.lines.length > 0 ? this.lines.length - 1 : 0;\n      const lastLine = this.lines[lastLineIndex] ?? new AnsiLine();\n      const lastChunk = lastLine.lastChunk();\n\n      const newLines = this.processLines(\n        (lastChunk?.text ?? '') + text.slice(this.text.length),\n        lastChunk?.modifiers,\n        lastLine?.lineNumber,\n      );\n      lastLine.replaceLastChunk(newLines[0]?.chunks);\n\n      this.lines[lastLineIndex] = lastLine;\n      this.lines.push(...newLines.slice(1));\n    } else {\n      this.lines = this.processLines(text);\n    }\n    this.text = text;\n\n    return this.lines;\n  }\n\n  // Split a chunk of text up into lines and process each line individually\n  private processLines = (\n    text: string,\n    modifiers: ChunkModifiers = {},\n    startingLineNumber: number = 1,\n  ): AnsiLine[] => {\n    const lines: AnsiLine[] = [];\n\n    let currentModifiers = modifiers;\n    let currentLineNumber = startingLineNumber;\n\n    let prevIndex = 0;\n    newlineRegex.lastIndex = 0;\n    for (;;) {\n      const match = newlineRegex.exec(text);\n      if (!match) {\n        const chunks = this.processText(\n          text.slice(prevIndex),\n          currentModifiers,\n        );\n        lines.push(new AnsiLine(currentLineNumber, chunks));\n        return lines;\n      }\n\n      const line = text.slice(prevIndex, match.index);\n      prevIndex = match.index + match[0].length;\n\n      const chunks = this.processText(line, currentModifiers);\n      lines.push(new AnsiLine(currentLineNumber, chunks));\n\n      // Modifiers that are active in the last chunk are carried over to the next line\n      currentModifiers =\n        chunks[chunks.length - 1].modifiers ?? currentModifiers;\n      currentLineNumber += 1;\n    }\n  };\n\n  // Processing of a one individual text chunk\n  private processText = (\n    fullText: string,\n    modifiers: ChunkModifiers,\n  ): AnsiChunk[] => {\n    const chunks: AnsiChunk[] = [];\n\n    let currentModifiers = modifiers;\n\n    let prevIndex = 0;\n    ansiRegex.lastIndex = 0;\n    for (;;) {\n      const match = ansiRegex.exec(fullText);\n      if (!match) {\n        chunks.push({\n          text: fullText.slice(prevIndex),\n          modifiers: currentModifiers,\n        });\n        return chunks;\n      }\n\n      const text = fullText.slice(prevIndex, match.index);\n      chunks.push({ text, modifiers: currentModifiers });\n\n      // For every escape code that we encounter we keep track of where the\n      // next chunk of text starts, and what modifiers it has\n      prevIndex = match.index + match[0].length;\n      currentModifiers = this.processCode(match[0], currentModifiers);\n    }\n  };\n\n  private processCode = (\n    code: string,\n    modifiers: ChunkModifiers,\n  ): ChunkModifiers => {\n    return codeModifiers[code]?.(modifiers) ?? modifiers;\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { alpha, makeStyles } from '@material-ui/core/styles';\nimport * as colors from '@material-ui/core/colors';\n\nexport const HEADER_SIZE = 40;\n\n/** @public Class keys for overriding LogViewer styles */\nexport type LogViewerClassKey =\n  | 'root'\n  | 'header'\n  | 'log'\n  | 'line'\n  | 'lineSelected'\n  | 'lineCopyButton'\n  | 'lineNumber'\n  | 'textHighlight'\n  | 'textSelectedHighlight'\n  | 'modifierBold'\n  | 'modifierItalic'\n  | 'modifierUnderline'\n  | 'modifierForegroundBlack'\n  | 'modifierForegroundRed'\n  | 'modifierForegroundGreen'\n  | 'modifierForegroundYellow'\n  | 'modifierForegroundBlue'\n  | 'modifierForegroundMagenta'\n  | 'modifierForegroundCyan'\n  | 'modifierForegroundWhite'\n  | 'modifierForegroundGrey'\n  | 'modifierBackgroundBlack'\n  | 'modifierBackgroundRed'\n  | 'modifierBackgroundGreen'\n  | 'modifierBackgroundYellow'\n  | 'modifierBackgroundBlue'\n  | 'modifierBackgroundMagenta'\n  | 'modifierBackgroundCyan'\n  | 'modifierBackgroundWhite'\n  | 'modifierBackgroundGrey';\n\nexport const useStyles = makeStyles(\n  theme => ({\n    root: {\n      background: theme.palette.background.paper,\n    },\n    header: {\n      height: HEADER_SIZE,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'flex-end',\n    },\n    log: {\n      fontFamily: '\"Monaco\", monospace',\n      fontSize: theme.typography.pxToRem(12),\n    },\n    line: {\n      position: 'relative',\n      whiteSpace: 'pre',\n\n      '&:hover': {\n        background: theme.palette.action.hover,\n      },\n    },\n    lineSelected: {\n      background: theme.palette.action.selected,\n\n      '&:hover': {\n        background: theme.palette.action.selected,\n      },\n    },\n    lineCopyButton: {\n      position: 'absolute',\n      paddingTop: 0,\n      paddingBottom: 0,\n    },\n    lineNumber: {\n      display: 'inline-block',\n      textAlign: 'end',\n      width: 60,\n      marginRight: theme.spacing(1),\n      cursor: 'pointer',\n    },\n    textHighlight: {\n      background: alpha(theme.palette.info.main, 0.15),\n    },\n    textSelectedHighlight: {\n      background: alpha(theme.palette.info.main, 0.4),\n    },\n    modifierBold: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    modifierItalic: {\n      fontStyle: 'italic',\n    },\n    modifierUnderline: {\n      textDecoration: 'underline',\n    },\n    modifierForegroundBlack: {\n      color: colors.common.black,\n    },\n    modifierForegroundRed: {\n      color: colors.red[500],\n    },\n    modifierForegroundGreen: {\n      color: colors.green[500],\n    },\n    modifierForegroundYellow: {\n      color: colors.yellow[500],\n    },\n    modifierForegroundBlue: {\n      color: colors.blue[500],\n    },\n    modifierForegroundMagenta: {\n      color: colors.purple[500],\n    },\n    modifierForegroundCyan: {\n      color: colors.cyan[500],\n    },\n    modifierForegroundWhite: {\n      color: colors.common.white,\n    },\n    modifierForegroundGrey: {\n      color: colors.grey[500],\n    },\n    modifierBackgroundBlack: {\n      background: colors.common.black,\n    },\n    modifierBackgroundRed: {\n      background: colors.red[500],\n    },\n    modifierBackgroundGreen: {\n      background: colors.green[500],\n    },\n    modifierBackgroundYellow: {\n      background: colors.yellow[500],\n    },\n    modifierBackgroundBlue: {\n      background: colors.blue[500],\n    },\n    modifierBackgroundMagenta: {\n      background: colors.purple[500],\n    },\n    modifierBackgroundCyan: {\n      background: colors.cyan[500],\n    },\n    modifierBackgroundWhite: {\n      background: colors.common.white,\n    },\n    modifierBackgroundGrey: {\n      background: colors.grey[500],\n    },\n  }),\n  { name: 'BackstageLogViewer' },\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo } from 'react';\nimport { AnsiChunk, AnsiLine, ChunkModifiers } from './AnsiProcessor';\nimport startCase from 'lodash/startCase';\nimport classnames from 'classnames';\nimport { useStyles } from './styles';\n\nexport function getModifierClasses(\n  classes: ReturnType<typeof useStyles>,\n  modifiers: ChunkModifiers,\n) {\n  const classNames = new Array<string>();\n  if (modifiers.bold) {\n    classNames.push(classes.modifierBold);\n  }\n  if (modifiers.italic) {\n    classNames.push(classes.modifierItalic);\n  }\n  if (modifiers.underline) {\n    classNames.push(classes.modifierUnderline);\n  }\n  if (modifiers.foreground) {\n    const key = `modifierForeground${startCase(\n      modifiers.foreground,\n    )}` as keyof typeof classes;\n    classNames.push(classes[key]);\n  }\n  if (modifiers.background) {\n    const key = `modifierBackground${startCase(\n      modifiers.background,\n    )}` as keyof typeof classes;\n    classNames.push(classes[key]);\n  }\n  return classNames.length > 0 ? classNames.join(' ') : undefined;\n}\n\nexport function findSearchResults(text: string, searchText: string) {\n  if (!searchText || !text.includes(searchText)) {\n    return undefined;\n  }\n  const searchResults = new Array<{ start: number; end: number }>();\n  let offset = 0;\n  for (;;) {\n    const start = text.indexOf(searchText, offset);\n    if (start === -1) {\n      break;\n    }\n    const end = start + searchText.length;\n    searchResults.push({ start, end });\n    offset = end;\n  }\n  return searchResults;\n}\n\nexport interface HighlightAnsiChunk extends AnsiChunk {\n  highlight?: number;\n}\n\nexport function calculateHighlightedChunks(\n  line: AnsiLine,\n  searchText: string,\n): HighlightAnsiChunk[] {\n  const results = findSearchResults(line.text, searchText);\n  if (!results) {\n    return line.chunks;\n  }\n\n  const chunks = new Array<HighlightAnsiChunk>();\n\n  let lineOffset = 0;\n  let resultIndex = 0;\n  let result = results[resultIndex];\n  for (const chunk of line.chunks) {\n    const { text, modifiers } = chunk;\n    if (!result || lineOffset + text.length < result.start) {\n      chunks.push(chunk);\n      lineOffset += text.length;\n      continue;\n    }\n\n    let localOffset = 0;\n    while (result) {\n      const localStart = Math.max(result.start - lineOffset, 0);\n      if (localStart > text.length) {\n        break; // The next result is not in this chunk\n      }\n\n      const localEnd = Math.min(result.end - lineOffset, text.length);\n\n      const hasTextBeforeResult = localStart > localOffset;\n      if (hasTextBeforeResult) {\n        chunks.push({ text: text.slice(localOffset, localStart), modifiers });\n      }\n      const hasResultText = localEnd > localStart;\n      if (hasResultText) {\n        chunks.push({\n          modifiers,\n          highlight: resultIndex,\n          text: text.slice(localStart, localEnd),\n        });\n      }\n\n      localOffset = localEnd;\n\n      const foundCompleteResult = result.end - lineOffset === localEnd;\n      if (foundCompleteResult) {\n        resultIndex += 1;\n        result = results[resultIndex];\n      } else {\n        break; // The rest of the result is in the following chunks\n      }\n    }\n\n    const hasTextAfterResult = localOffset < text.length;\n    if (hasTextAfterResult) {\n      chunks.push({ text: text.slice(localOffset), modifiers });\n    }\n\n    lineOffset += text.length;\n  }\n\n  return chunks;\n}\n\nexport interface LogLineProps {\n  line: AnsiLine;\n  classes: ReturnType<typeof useStyles>;\n  searchText: string;\n  highlightResultIndex?: number;\n}\n\nexport function LogLine({\n  line,\n  classes,\n  searchText,\n  highlightResultIndex,\n}: LogLineProps) {\n  const chunks = useMemo(\n    () => calculateHighlightedChunks(line, searchText),\n    [line, searchText],\n  );\n\n  const elements = useMemo(\n    () =>\n      chunks.map(({ text, modifiers, highlight }, index) => (\n        <span\n          key={index}\n          className={classnames(\n            getModifierClasses(classes, modifiers),\n            highlight !== undefined &&\n              (highlight === highlightResultIndex\n                ? classes.textSelectedHighlight\n                : classes.textHighlight),\n          )}\n        >\n          {text}\n        </span>\n      )),\n    [chunks, highlightResultIndex, classes],\n  );\n\n  return <>{elements}</>;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { LogViewerSearch } from './useLogViewerSearch';\n\nexport interface LogViewerControlsProps extends LogViewerSearch {}\n\nexport function LogViewerControls(props: LogViewerControlsProps) {\n  const { resultCount, resultIndexStep, toggleShouldFilter } = props;\n  const resultIndex = props.resultIndex ?? 0;\n\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      if (event.metaKey || event.ctrlKey || event.altKey) {\n        toggleShouldFilter();\n      } else {\n        resultIndexStep(event.shiftKey);\n      }\n    }\n  };\n\n  return (\n    <>\n      {resultCount !== undefined && (\n        <>\n          <IconButton size=\"small\" onClick={() => resultIndexStep(true)}>\n            <ChevronLeftIcon />\n          </IconButton>\n          <Typography>\n            {Math.min(resultIndex + 1, resultCount)}/{resultCount}\n          </Typography>\n          <IconButton size=\"small\" onClick={() => resultIndexStep()}>\n            <ChevronRightIcon />\n          </IconButton>\n        </>\n      )}\n      <TextField\n        size=\"small\"\n        variant=\"standard\"\n        placeholder=\"Search\"\n        value={props.searchInput}\n        onKeyPress={handleKeyPress}\n        onChange={e => props.setSearchInput(e.target.value)}\n      />\n      <IconButton size=\"small\" onClick={toggleShouldFilter}>\n        {props.shouldFilter ? (\n          <FilterListIcon color=\"primary\" />\n        ) : (\n          <FilterListIcon color=\"disabled\" />\n        )}\n      </IconButton>\n    </>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useState } from 'react';\nimport { useToggle } from '@react-hookz/web';\nimport { AnsiLine } from './AnsiProcessor';\n\nexport function applySearchFilter(lines: AnsiLine[], searchText: string) {\n  if (!searchText) {\n    return { lines };\n  }\n\n  const matchingLines = [];\n  const searchResults = [];\n  for (const line of lines) {\n    if (line.text.includes(searchText)) {\n      matchingLines.push(line);\n\n      let offset = 0;\n      let lineResultIndex = 0;\n      for (;;) {\n        const start = line.text.indexOf(searchText, offset);\n        if (start === -1) {\n          break;\n        }\n        searchResults.push({\n          lineNumber: line.lineNumber,\n          lineIndex: lineResultIndex++,\n        });\n        offset = start + searchText.length;\n      }\n    }\n  }\n\n  return {\n    lines: matchingLines,\n    results: searchResults,\n  };\n}\n\nexport interface LogViewerSearch {\n  lines: AnsiLine[];\n\n  searchText: string;\n  searchInput: string;\n  setSearchInput: (searchInput: string) => void;\n\n  shouldFilter: boolean;\n  toggleShouldFilter: () => void;\n\n  resultCount: number | undefined;\n  resultIndex: number | undefined;\n  resultIndexStep: (decrement?: boolean) => void;\n\n  resultLine: number | undefined;\n  resultLineIndex: number | undefined;\n}\n\nexport function useLogViewerSearch(lines: AnsiLine[]): LogViewerSearch {\n  const [searchInput, setSearchInput] = useState('');\n  const searchText = searchInput.toLocaleLowerCase('en-US');\n\n  const [resultIndex, setResultIndex] = useState<number>(0);\n\n  const [shouldFilter, toggleShouldFilter] = useToggle(false);\n\n  const filter = useMemo(\n    () => applySearchFilter(lines, searchText),\n    [lines, searchText],\n  );\n\n  const searchResult = filter.results\n    ? filter.results[Math.min(resultIndex, filter.results.length - 1)]\n    : undefined;\n  const resultCount = filter.results?.length;\n\n  const resultIndexStep = (decrement?: boolean) => {\n    if (decrement) {\n      if (resultCount !== undefined) {\n        const next = Math.min(resultIndex - 1, resultCount - 2);\n        setResultIndex(next < 0 ? resultCount - 1 : next);\n      }\n    } else {\n      if (resultCount !== undefined) {\n        const next = resultIndex + 1;\n        setResultIndex(next >= resultCount ? 0 : next);\n      }\n    }\n  };\n\n  return {\n    lines: shouldFilter ? filter.lines : lines,\n    searchText,\n    searchInput,\n    setSearchInput,\n    shouldFilter,\n    toggleShouldFilter,\n    resultCount,\n    resultIndex,\n    resultIndexStep,\n    resultLine: searchResult?.lineNumber,\n    resultLineIndex: searchResult?.lineIndex,\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useEffect, useState } from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\nimport { AnsiLine } from './AnsiProcessor';\n\nexport function useLogViewerSelection(lines: AnsiLine[]) {\n  const errorApi = useApi(errorApiRef);\n  const [sel, setSelection] = useState<{ start: number; end: number }>();\n  const start = sel ? Math.min(sel.start, sel.end) : undefined;\n  const end = sel ? Math.max(sel.start, sel.end) : undefined;\n\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  return {\n    shouldShowButton(line: number) {\n      return start === line || end === line;\n    },\n    isSelected(line: number) {\n      if (!sel) {\n        return false;\n      }\n      return start! <= line && line <= end!;\n    },\n    setSelection(line: number, add: boolean) {\n      if (add) {\n        setSelection(s =>\n          s ? { start: s.start, end: line } : { start: line, end: line },\n        );\n      } else {\n        setSelection(s =>\n          s?.start === line && s?.end === line\n            ? undefined\n            : { start: line, end: line },\n        );\n      }\n    },\n    copySelection() {\n      if (sel) {\n        const copyText = lines\n          .slice(Math.min(sel.start, sel.end) - 1, Math.max(sel.start, sel.end))\n          .map(l => l.chunks.map(c => c.text).join(''))\n          .join('\\n');\n        copyToClipboard(copyText);\n        setSelection(undefined);\n      }\n    },\n  };\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useMemo, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { FixedSizeList } from 'react-window';\nimport { AnsiProcessor } from './AnsiProcessor';\nimport { HEADER_SIZE, useStyles } from './styles';\nimport classnames from 'classnames';\nimport { LogLine } from './LogLine';\nimport { LogViewerControls } from './LogViewerControls';\nimport { useLogViewerSearch } from './useLogViewerSearch';\nimport { useLogViewerSelection } from './useLogViewerSelection';\n\nexport interface RealLogViewerProps {\n  text: string;\n  classes?: { root?: string };\n}\n\nexport function RealLogViewer(props: RealLogViewerProps) {\n  const classes = useStyles({ classes: props.classes });\n  const listRef = useRef<FixedSizeList | null>(null);\n\n  // The processor keeps state that optimizes appending to the text\n  const processor = useMemo(() => new AnsiProcessor(), []);\n  const lines = processor.process(props.text);\n\n  const search = useLogViewerSearch(lines);\n  const selection = useLogViewerSelection(lines);\n  const location = useLocation();\n\n  useEffect(() => {\n    if (search.resultLine !== undefined && listRef.current) {\n      listRef.current.scrollToItem(search.resultLine - 1, 'center');\n    }\n  }, [search.resultLine]);\n\n  useEffect(() => {\n    if (location.hash) {\n      // #line-6 -> 6\n      const line = parseInt(location.hash.replace(/\\D/g, ''), 10);\n      selection.setSelection(line, false);\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const handleSelectLine = (\n    line: number,\n    event: { shiftKey: boolean; preventDefault: () => void },\n  ) => {\n    selection.setSelection(line, event.shiftKey);\n  };\n\n  return (\n    <AutoSizer>\n      {({ height, width }) => (\n        <div style={{ width, height }} className={classes.root}>\n          <div className={classes.header}>\n            <LogViewerControls {...search} />\n          </div>\n          <FixedSizeList\n            ref={listRef}\n            className={classes.log}\n            height={height - HEADER_SIZE}\n            width={width}\n            itemData={search.lines}\n            itemSize={20}\n            itemCount={search.lines.length}\n          >\n            {({ index, style, data }) => {\n              const line = data[index];\n              const { lineNumber } = line;\n              return (\n                <div\n                  style={{ ...style }}\n                  className={classnames(classes.line, {\n                    [classes.lineSelected]: selection.isSelected(lineNumber),\n                  })}\n                >\n                  {selection.shouldShowButton(lineNumber) && (\n                    <IconButton\n                      data-testid=\"copy-button\"\n                      size=\"small\"\n                      className={classes.lineCopyButton}\n                      onClick={() => selection.copySelection()}\n                    >\n                      <CopyIcon fontSize=\"inherit\" />\n                    </IconButton>\n                  )}\n                  <a\n                    role=\"row\"\n                    target=\"_self\"\n                    href={`#line-${lineNumber}`}\n                    className={classes.lineNumber}\n                    onClick={event => handleSelectLine(lineNumber, event)}\n                    onKeyPress={event => handleSelectLine(lineNumber, event)}\n                  >\n                    {lineNumber}\n                  </a>\n                  <LogLine\n                    line={line}\n                    classes={classes}\n                    searchText={search.searchText}\n                    highlightResultIndex={\n                      search.resultLine === lineNumber\n                        ? search.resultLineIndex\n                        : undefined\n                    }\n                  />\n                </div>\n              );\n            }}\n          </FixedSizeList>\n        </div>\n      )}\n    </AutoSizer>\n  );\n}\n"],"names":["classnames","ChevronRightIcon","FilterListIcon"],"mappings":"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"}