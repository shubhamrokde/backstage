{"version":3,"file":"index-6c1324ea.esm.js","sources":["../../src/apis.ts","../../src/components/Filters/FiltersButton.tsx","../../src/components/Filters/Filters.tsx","../../src/components/SearchContext/SearchContext.tsx","../../src/components/SearchTracker/SearchTracker.tsx","../../src/components/SearchBar/SearchBar.tsx","../../src/components/SearchFilter/hooks.ts","../../src/components/SearchFilter/SearchFilter.Autocomplete.tsx","../../src/components/SearchFilter/SearchFilter.tsx","../../src/components/DefaultResultListItem/DefaultResultListItem.tsx","../../src/components/SearchResult/SearchResult.tsx","../../src/components/SearchResultPager/SearchResultPager.tsx","../../src/plugin.ts","../../src/components/SearchModal/SearchModal.tsx","../../src/components/SearchModal/useSearchModal.tsx","../../src/components/LegacySearchPage/LegacySearchBar.tsx","../../src/components/LegacySearchPage/Filters/FiltersButton.tsx","../../src/components/LegacySearchPage/Filters/Filters.tsx","../../src/components/LegacySearchPage/LegacySearchResult.tsx","../../src/components/LegacySearchPage/LegacySearchPage.tsx","../../src/components/SearchPage/SearchPage.tsx","../../src/components/SearchType/SearchType.Accordion.tsx","../../src/components/SearchType/SearchType.Tabs.tsx","../../src/components/SearchType/SearchType.tsx","../../src/components/SidebarSearch/SidebarSearch.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createApiRef,\n  DiscoveryApi,\n  IdentityApi,\n} from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\nimport { SearchQuery, SearchResultSet } from '@backstage/plugin-search-common';\nimport qs from 'qs';\n\nexport const searchApiRef = createApiRef<SearchApi>({\n  id: 'plugin.search.queryservice',\n});\n\nexport interface SearchApi {\n  query(query: SearchQuery): Promise<SearchResultSet>;\n}\n\nexport class SearchClient implements SearchApi {\n  private readonly discoveryApi: DiscoveryApi;\n  private readonly identityApi: IdentityApi;\n\n  constructor(options: {\n    discoveryApi: DiscoveryApi;\n    identityApi: IdentityApi;\n  }) {\n    this.discoveryApi = options.discoveryApi;\n    this.identityApi = options.identityApi;\n  }\n\n  async query(query: SearchQuery): Promise<SearchResultSet> {\n    const { token } = await this.identityApi.getCredentials();\n    const queryString = qs.stringify(query);\n    const url = `${await this.discoveryApi.getBaseUrl(\n      'search/query',\n    )}?${queryString}`;\n    const response = await fetch(url, {\n      headers: token ? { Authorization: `Bearer ${token}` } : {},\n    });\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return response.json();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { makeStyles, IconButton, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    width: '250px',\n    display: 'flex',\n  },\n  icon: {\n    margin: theme.spacing(-1, 0, 0, 0),\n  },\n}));\n\ntype FiltersButtonProps = {\n  numberOfSelectedFilters: number;\n  handleToggleFilters: () => void;\n};\n\nexport const FiltersButton = ({\n  numberOfSelectedFilters,\n  handleToggleFilters,\n}: FiltersButtonProps) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.filters}>\n      <IconButton\n        className={classes.icon}\n        aria-label=\"settings\"\n        onClick={handleToggleFilters}\n      >\n        <FilterListIcon />\n      </IconButton>\n      <Typography variant=\"h6\">\n        Filters ({numberOfSelectedFilters ? numberOfSelectedFilters : 0})\n      </Typography>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  makeStyles,\n  Typography,\n  Divider,\n  Card,\n  CardHeader,\n  Button,\n  CardContent,\n  Select,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemText,\n  MenuItem,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    background: 'transparent',\n    boxShadow: '0px 0px 0px 0px',\n  },\n  checkbox: {\n    padding: theme.spacing(0, 1, 0, 1),\n  },\n  dropdown: {\n    width: '100%',\n  },\n}));\n\nexport type FiltersState = {\n  selected: string;\n  checked: Array<string>;\n};\n\nexport type FilterOptions = {\n  kind: Array<string>;\n  lifecycle: Array<string>;\n};\n\ntype FiltersProps = {\n  filters: FiltersState;\n  filterOptions: FilterOptions;\n  resetFilters: () => void;\n  updateSelected: (filter: string) => void;\n  updateChecked: (filter: string) => void;\n};\n\nexport const Filters = ({\n  filters,\n  filterOptions,\n  resetFilters,\n  updateSelected,\n  updateChecked,\n}: FiltersProps) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.filters}>\n      <CardHeader\n        title={<Typography variant=\"h6\">Filters</Typography>}\n        action={\n          <Button color=\"primary\" onClick={() => resetFilters()}>\n            CLEAR ALL\n          </Button>\n        }\n      />\n      <Divider />\n      {filterOptions.kind.length === 0 && filterOptions.lifecycle.length === 0 && (\n        <CardContent>\n          <Typography variant=\"subtitle2\">\n            Filters cannot be applied to available results\n          </Typography>\n        </CardContent>\n      )}\n      {filterOptions.kind.length > 0 && (\n        <CardContent>\n          <Typography variant=\"subtitle2\">Kind</Typography>\n          <Select\n            id=\"outlined-select\"\n            onChange={(e: React.ChangeEvent<any>) =>\n              updateSelected(e?.target?.value)\n            }\n            variant=\"outlined\"\n            className={classes.dropdown}\n            value={filters.selected}\n          >\n            {filterOptions.kind.map(filter => (\n              <MenuItem\n                selected={filter === ''}\n                dense\n                key={filter}\n                value={filter}\n              >\n                {filter}\n              </MenuItem>\n            ))}\n          </Select>\n        </CardContent>\n      )}\n      {filterOptions.lifecycle.length > 0 && (\n        <CardContent>\n          <Typography variant=\"subtitle2\">Lifecycle</Typography>\n          <List disablePadding dense>\n            {filterOptions.lifecycle.map(filter => (\n              <ListItem\n                key={filter}\n                dense\n                button\n                onClick={() => updateChecked(filter)}\n              >\n                <Checkbox\n                  edge=\"start\"\n                  disableRipple\n                  className={classes.checkbox}\n                  color=\"primary\"\n                  checked={filters.checked.includes(filter)}\n                  tabIndex={-1}\n                  value={filter}\n                  name={filter}\n                />\n                <ListItemText id={filter} primary={filter} />\n              </ListItem>\n            ))}\n          </List>\n        </CardContent>\n      )}\n    </Card>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { JsonObject } from '@backstage/types';\nimport { useApi, AnalyticsContext } from '@backstage/core-plugin-api';\nimport { SearchResultSet } from '@backstage/plugin-search-common';\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport useAsync, { AsyncState } from 'react-use/lib/useAsync';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { searchApiRef } from '../../apis';\n\ntype SearchContextValue = {\n  result: AsyncState<SearchResultSet>;\n  setTerm: React.Dispatch<React.SetStateAction<string>>;\n  setTypes: React.Dispatch<React.SetStateAction<string[]>>;\n  setFilters: React.Dispatch<React.SetStateAction<JsonObject>>;\n  setPageCursor: React.Dispatch<React.SetStateAction<string | undefined>>;\n  fetchNextPage?: React.DispatchWithoutAction;\n  fetchPreviousPage?: React.DispatchWithoutAction;\n} & SearchContextState;\n\n/**\n * The initial state of `SearchContextProvider`.\n *\n * @public\n */\nexport type SearchContextState = {\n  term: string;\n  types: string[];\n  filters: JsonObject;\n  pageCursor?: string;\n};\n\nexport const SearchContext = createContext<SearchContextValue | undefined>(\n  undefined,\n);\n\nconst searchInitialState: SearchContextState = {\n  term: '',\n  pageCursor: undefined,\n  filters: {},\n  types: [],\n};\n\nexport const SearchContextProvider = ({\n  initialState = searchInitialState,\n  children,\n}: PropsWithChildren<{ initialState?: SearchContextState }>) => {\n  const searchApi = useApi(searchApiRef);\n  const [pageCursor, setPageCursor] = useState<string | undefined>(\n    initialState.pageCursor,\n  );\n  const [filters, setFilters] = useState<JsonObject>(initialState.filters);\n  const [term, setTerm] = useState<string>(initialState.term);\n  const [types, setTypes] = useState<string[]>(initialState.types);\n\n  const prevTerm = usePrevious(term);\n\n  const result = useAsync(\n    () =>\n      searchApi.query({\n        term,\n        filters,\n        pageCursor,\n        types,\n      }),\n    [term, filters, types, pageCursor],\n  );\n\n  const hasNextPage =\n    !result.loading && !result.error && result.value?.nextPageCursor;\n  const hasPreviousPage =\n    !result.loading && !result.error && result.value?.previousPageCursor;\n  const fetchNextPage = useCallback(() => {\n    setPageCursor(result.value?.nextPageCursor);\n  }, [result.value?.nextPageCursor]);\n  const fetchPreviousPage = useCallback(() => {\n    setPageCursor(result.value?.previousPageCursor);\n  }, [result.value?.previousPageCursor]);\n\n  useEffect(() => {\n    // Any time a term is reset, we want to start from page 0.\n    if (term && prevTerm && term !== prevTerm) {\n      setPageCursor(undefined);\n    }\n  }, [term, prevTerm, initialState.pageCursor]);\n\n  const value: SearchContextValue = {\n    result,\n    filters,\n    setFilters,\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    fetchNextPage: hasNextPage ? fetchNextPage : undefined,\n    fetchPreviousPage: hasPreviousPage ? fetchPreviousPage : undefined,\n  };\n\n  return (\n    <AnalyticsContext attributes={{ searchTypes: types.sort().join(',') }}>\n      <SearchContext.Provider value={value} children={children} />\n    </AnalyticsContext>\n  );\n};\n\nexport const useSearch = () => {\n  const context = useContext(SearchContext);\n  if (context === undefined) {\n    throw new Error('useSearch must be used within a SearchContextProvider');\n  }\n  return context;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useAnalytics } from '@backstage/core-plugin-api';\nimport { useSearch } from '../SearchContext';\n\n/**\n * Capture search event on term change.\n */\nexport const TrackSearch = ({ children }: { children: React.ReactChild }) => {\n  const analytics = useAnalytics();\n  const { term } = useSearch();\n\n  useEffect(() => {\n    if (term) {\n      // Capture analytics search event with search term provided as value\n      analytics.captureEvent('search', term);\n    }\n  }, [analytics, term]);\n\n  return <>{children}</>;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ChangeEvent,\n  KeyboardEvent,\n  useState,\n  useEffect,\n  useCallback,\n  useContext,\n} from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport {\n  InputBase,\n  InputBaseProps,\n  InputAdornment,\n  IconButton,\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearButton from '@material-ui/icons/Clear';\n\nimport {\n  SearchContext,\n  SearchContextProvider,\n  useSearch,\n} from '../SearchContext';\nimport { TrackSearch } from '../SearchTracker';\n\n/**\n * Props for {@link SearchBarBase}.\n *\n * @public\n */\nexport type SearchBarBaseProps = Omit<InputBaseProps, 'onChange'> & {\n  debounceTime?: number;\n  clearButton?: boolean;\n  onClear?: () => void;\n  onSubmit?: () => void;\n  onChange: (value: string) => void;\n};\n\nconst useSearchContextCheck = () => {\n  const context = useContext(SearchContext);\n  return context !== undefined;\n};\n\n/**\n * All search boxes exported by the search plugin are based on the <SearchBarBase />,\n * and this one is based on the <InputBase /> component from Material UI.\n * Recommended if you don't use Search Provider or Search Context.\n *\n * @public\n */\nexport const SearchBarBase = ({\n  onChange,\n  onKeyDown,\n  onSubmit,\n  debounceTime = 200,\n  clearButton = true,\n  fullWidth = true,\n  value: defaultValue,\n  inputProps: defaultInputProps = {},\n  endAdornment: defaultEndAdornment,\n  ...props\n}: SearchBarBaseProps) => {\n  const configApi = useApi(configApiRef);\n  const [value, setValue] = useState<string>(defaultValue as string);\n  const hasSearchContext = useSearchContextCheck();\n\n  useEffect(() => {\n    setValue(prevValue =>\n      prevValue !== defaultValue ? (defaultValue as string) : prevValue,\n    );\n  }, [defaultValue]);\n\n  useDebounce(() => onChange(value), debounceTime, [value]);\n\n  const handleChange = useCallback(\n    (e: ChangeEvent<HTMLInputElement>) => {\n      setValue(e.target.value);\n    },\n    [setValue],\n  );\n\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent<HTMLInputElement>) => {\n      if (onKeyDown) onKeyDown(e);\n      if (onSubmit && e.key === 'Enter') {\n        onSubmit();\n      }\n    },\n    [onKeyDown, onSubmit],\n  );\n\n  const handleClear = useCallback(() => {\n    onChange('');\n  }, [onChange]);\n\n  const placeholder = `Search in ${\n    configApi.getOptionalString('app.title') || 'Backstage'\n  }`;\n\n  const startAdornment = (\n    <InputAdornment position=\"start\">\n      <IconButton aria-label=\"Query\" disabled>\n        <SearchIcon />\n      </IconButton>\n    </InputAdornment>\n  );\n\n  const endAdornment = (\n    <InputAdornment position=\"end\">\n      <IconButton aria-label=\"Clear\" onClick={handleClear}>\n        <ClearButton />\n      </IconButton>\n    </InputAdornment>\n  );\n\n  const searchBar = (\n    <TrackSearch>\n      <InputBase\n        data-testid=\"search-bar-next\"\n        value={value}\n        placeholder={placeholder}\n        startAdornment={startAdornment}\n        endAdornment={clearButton ? endAdornment : defaultEndAdornment}\n        inputProps={{ 'aria-label': 'Search', ...defaultInputProps }}\n        fullWidth={fullWidth}\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        {...props}\n      />\n    </TrackSearch>\n  );\n\n  return hasSearchContext ? (\n    searchBar\n  ) : (\n    <SearchContextProvider>{searchBar}</SearchContextProvider>\n  );\n};\n\n/**\n * Props for {@link SearchBar}.\n *\n * @public\n */\nexport type SearchBarProps = Partial<SearchBarBaseProps>;\n\n/**\n * Recommended search bar when you use the Search Provider or Search Context.\n *\n * @public\n */\nexport const SearchBar = ({ onChange, ...props }: SearchBarProps) => {\n  const { term, setTerm } = useSearch();\n\n  const handleChange = useCallback(\n    (newValue: string) => {\n      if (onChange) {\n        onChange(newValue);\n      } else {\n        setTerm(newValue);\n      }\n    },\n    [onChange, setTerm],\n  );\n\n  return <SearchBarBase value={term} onChange={handleChange} {...props} />;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useRef } from 'react';\nimport useAsyncFn from 'react-use/lib/useAsyncFn';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { useSearch } from '../SearchContext';\n\n/**\n * Utility hook for either asynchronously loading filter values from a given\n * function or synchronously providing a given list of default values.\n */\nexport const useAsyncFilterValues = (\n  fn: ((partial: string) => Promise<string[]>) | undefined,\n  inputValue: string,\n  defaultValues: string[] = [],\n  debounce: number = 250,\n) => {\n  const valuesMemo = useRef<Record<string, string[] | Promise<string[]>>>({});\n  const definiteFn = fn || (() => Promise.resolve([]));\n\n  const [state, callback] = useAsyncFn(definiteFn, [inputValue], {\n    loading: true,\n  });\n\n  // Do not invoke the given function more than necessary.\n  useDebounce(\n    () => {\n      // Performance optimization: only invoke the callback once per inputValue\n      // for the lifetime of the hook/component.\n      if (valuesMemo.current[inputValue] === undefined) {\n        valuesMemo.current[inputValue] = callback(inputValue).then(values => {\n          // Override the value for future immediate returns.\n          valuesMemo.current[inputValue] = values;\n          return values;\n        });\n      }\n    },\n    debounce,\n    [callback, inputValue],\n  );\n\n  // Immediately return the default values if they are provided.\n  if (defaultValues.length) {\n    return {\n      loading: false,\n      value: defaultValues,\n    };\n  }\n\n  // Immediately return a memoized value if it is set (and not a promise).\n  const possibleValue = valuesMemo.current[inputValue];\n  if (Array.isArray(possibleValue)) {\n    return {\n      loading: false,\n      value: possibleValue,\n    };\n  }\n\n  return state;\n};\n\n/**\n * Utility hook for applying a given default value to the search context.\n */\nexport const useDefaultFilterValue = (\n  name: string,\n  defaultValue?: string | string[] | null,\n) => {\n  const { setFilters } = useSearch();\n\n  useEffect(() => {\n    if (defaultValue && [defaultValue].flat().length > 0) {\n      setFilters(prevFilters => ({\n        ...prevFilters,\n        [name]: defaultValue,\n      }));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ChangeEvent, useState } from 'react';\nimport { Chip, TextField } from '@material-ui/core';\nimport {\n  Autocomplete,\n  AutocompleteGetTagProps,\n  AutocompleteRenderInputParams,\n} from '@material-ui/lab';\nimport { useSearch } from '../SearchContext';\nimport { useAsyncFilterValues, useDefaultFilterValue } from './hooks';\nimport { SearchFilterComponentProps } from './SearchFilter';\n\n/**\n * @public\n */\nexport type SearchAutocompleteFilterProps = SearchFilterComponentProps & {\n  filterSelectedOptions?: boolean;\n  limitTags?: number;\n  multiple?: boolean;\n};\n\nexport const AutocompleteFilter = (props: SearchAutocompleteFilterProps) => {\n  const {\n    className,\n    defaultValue,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n    label,\n    filterSelectedOptions,\n    limitTags,\n    multiple,\n  } = props;\n  const [inputValue, setInputValue] = useState<string>('');\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues =\n    typeof givenValues === 'function' ? givenValues : undefined;\n  const defaultValues =\n    typeof givenValues === 'function' ? undefined : givenValues;\n  const { value: values, loading } = useAsyncFilterValues(\n    asyncValues,\n    inputValue,\n    defaultValues,\n    valuesDebounceMs,\n  );\n  const { filters, setFilters } = useSearch();\n  const filterValue =\n    (filters[name] as string | string[] | undefined) || (multiple ? [] : null);\n\n  // Set new filter values on input change.\n  const handleChange = (\n    _: ChangeEvent<{}>,\n    newValue: string | string[] | null,\n  ) => {\n    setFilters(prevState => {\n      const { [name]: filter, ...others } = prevState;\n\n      if (newValue) {\n        return { ...others, [name]: newValue };\n      }\n      return { ...others };\n    });\n  };\n\n  // Provide the input field.\n  const renderInput = (params: AutocompleteRenderInputParams) => (\n    <TextField\n      {...params}\n      name=\"search\"\n      variant=\"outlined\"\n      label={label}\n      fullWidth\n    />\n  );\n\n  // Render tags as primary-colored chips.\n  const renderTags = (\n    tagValue: string[],\n    getTagProps: AutocompleteGetTagProps,\n  ) =>\n    tagValue.map((option: string, index: number) => (\n      <Chip label={option} color=\"primary\" {...getTagProps({ index })} />\n    ));\n\n  return (\n    <Autocomplete\n      filterSelectedOptions={filterSelectedOptions}\n      limitTags={limitTags}\n      multiple={multiple}\n      className={className}\n      id={`${multiple ? 'multi-' : ''}select-filter-${name}--select`}\n      options={values || []}\n      loading={loading}\n      value={filterValue}\n      onChange={handleChange}\n      onInputChange={(_, newValue) => setInputValue(newValue)}\n      renderInput={renderInput}\n      renderTags={renderTags}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement, ChangeEvent } from 'react';\nimport {\n  makeStyles,\n  FormControl,\n  FormControlLabel,\n  InputLabel,\n  Checkbox,\n  Select,\n  MenuItem,\n  FormLabel,\n} from '@material-ui/core';\n\nimport {\n  AutocompleteFilter,\n  SearchAutocompleteFilterProps,\n} from './SearchFilter.Autocomplete';\nimport { useSearch } from '../SearchContext';\nimport { useAsyncFilterValues, useDefaultFilterValue } from './hooks';\n\nconst useStyles = makeStyles({\n  label: {\n    textTransform: 'capitalize',\n  },\n});\n\n/**\n * @public\n */\nexport type SearchFilterComponentProps = {\n  className?: string;\n  name: string;\n  label?: string;\n  /**\n   * Either an array of values directly, or an async function to return a list\n   * of values to be used in the filter. In the autocomplete filter, the last\n   * input value is provided as an input to allow values to be filtered. This\n   * function is debounced and values cached.\n   */\n  values?: string[] | ((partial: string) => Promise<string[]>);\n  defaultValue?: string[] | string | null;\n  /**\n   * Debounce time in milliseconds, used when values is an async callback.\n   * Defaults to 250ms.\n   */\n  valuesDebounceMs?: number;\n};\n\n/**\n * @public\n */\nexport type SearchFilterWrapperProps = SearchFilterComponentProps & {\n  component: (props: SearchFilterComponentProps) => ReactElement;\n  debug?: boolean;\n};\n\nconst CheckboxFilter = (props: SearchFilterComponentProps) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues = [],\n    valuesDebounceMs,\n  } = props;\n  const classes = useStyles();\n  const { filters, setFilters } = useSearch();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues =\n    typeof givenValues === 'function' ? givenValues : undefined;\n  const defaultValues =\n    typeof givenValues === 'function' ? undefined : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    '',\n    defaultValues,\n    valuesDebounceMs,\n  );\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const {\n      target: { value, checked },\n    } = e;\n\n    setFilters(prevFilters => {\n      const { [name]: filter, ...others } = prevFilters;\n      const rest = ((filter as string[]) || []).filter(i => i !== value);\n      const items = checked ? [...rest, value] : rest;\n      return items.length ? { ...others, [name]: items } : others;\n    });\n  };\n\n  return (\n    <FormControl\n      className={className}\n      disabled={loading}\n      fullWidth\n      data-testid=\"search-checkboxfilter-next\"\n    >\n      {label ? <FormLabel className={classes.label}>{label}</FormLabel> : null}\n      {values.map((value: string) => (\n        <FormControlLabel\n          key={value}\n          control={\n            <Checkbox\n              color=\"primary\"\n              tabIndex={-1}\n              inputProps={{ 'aria-labelledby': value }}\n              value={value}\n              name={value}\n              onChange={handleChange}\n              checked={((filters[name] as string[]) ?? []).includes(value)}\n            />\n          }\n          label={value}\n        />\n      ))}\n    </FormControl>\n  );\n};\n\nconst SelectFilter = (props: SearchFilterComponentProps) => {\n  const {\n    className,\n    defaultValue,\n    label,\n    name,\n    values: givenValues,\n    valuesDebounceMs,\n  } = props;\n  const classes = useStyles();\n  useDefaultFilterValue(name, defaultValue);\n  const asyncValues =\n    typeof givenValues === 'function' ? givenValues : undefined;\n  const defaultValues =\n    typeof givenValues === 'function' ? undefined : givenValues;\n  const { value: values = [], loading } = useAsyncFilterValues(\n    asyncValues,\n    '',\n    defaultValues,\n    valuesDebounceMs,\n  );\n  const { filters, setFilters } = useSearch();\n\n  const handleChange = (e: ChangeEvent<{ value: unknown }>) => {\n    const {\n      target: { value },\n    } = e;\n\n    setFilters(prevFilters => {\n      const { [name]: filter, ...others } = prevFilters;\n      return value ? { ...others, [name]: value as string } : others;\n    });\n  };\n\n  return (\n    <FormControl\n      disabled={loading}\n      className={className}\n      variant=\"filled\"\n      fullWidth\n      data-testid=\"search-selectfilter-next\"\n    >\n      {label ? (\n        <InputLabel className={classes.label} margin=\"dense\">\n          {label}\n        </InputLabel>\n      ) : null}\n      <Select\n        variant=\"outlined\"\n        value={filters[name] || ''}\n        onChange={handleChange}\n      >\n        <MenuItem value=\"\">\n          <em>All</em>\n        </MenuItem>\n        {values.map((value: string) => (\n          <MenuItem key={value} value={value}>\n            {value}\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n};\n\nconst SearchFilter = ({\n  component: Element,\n  ...props\n}: SearchFilterWrapperProps) => <Element {...props} />;\n\nSearchFilter.Checkbox = (\n  props: Omit<SearchFilterWrapperProps, 'component'> &\n    SearchFilterComponentProps,\n) => <SearchFilter {...props} component={CheckboxFilter} />;\n\nSearchFilter.Select = (\n  props: Omit<SearchFilterWrapperProps, 'component'> &\n    SearchFilterComponentProps,\n) => <SearchFilter {...props} component={SelectFilter} />;\n\n/**\n * A control surface for a given filter field name, rendered as an autocomplete\n * textfield. A hard-coded list of values may be provided, or an async function\n * which returns values may be provided instead.\n * @public\n */\nSearchFilter.Autocomplete = (props: SearchAutocompleteFilterProps) => (\n  <SearchFilter {...props} component={AutocompleteFilter} />\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchFilter /> component instead. This component will be removed in an\n * upcoming release.\n */\nconst SearchFilterNext = SearchFilter;\n\nexport { SearchFilter, SearchFilterNext };\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactNode } from 'react';\nimport { IndexableDocument } from '@backstage/plugin-search-common';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Divider,\n} from '@material-ui/core';\nimport { Link } from '@backstage/core-components';\nimport TextTruncate from 'react-text-truncate';\n\ntype Props = {\n  icon?: ReactNode;\n  secondaryAction?: ReactNode;\n  result: IndexableDocument;\n  lineClamp?: number;\n};\n\nexport const DefaultResultListItem = ({\n  result,\n  icon,\n  secondaryAction,\n  lineClamp = 5,\n}: Props) => {\n  return (\n    <Link to={result.location}>\n      <ListItem alignItems=\"center\">\n        {icon && <ListItemIcon>{icon}</ListItemIcon>}\n        <ListItemText\n          primaryTypographyProps={{ variant: 'h6' }}\n          primary={result.title}\n          secondary={\n            <TextTruncate\n              line={lineClamp}\n              truncateText=\"…\"\n              text={result.text}\n              element=\"span\"\n            />\n          }\n        />\n        {secondaryAction && <Box alignItems=\"flex-end\">{secondaryAction}</Box>}\n      </ListItem>\n      <Divider />\n    </Link>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  EmptyState,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\nimport { SearchResult } from '@backstage/plugin-search-common';\nimport React from 'react';\nimport { useSearch } from '../SearchContext';\n\ntype Props = {\n  children: (results: { results: SearchResult[] }) => JSX.Element;\n};\n\nexport const SearchResultComponent = ({ children }: Props) => {\n  const {\n    result: { loading, error, value },\n  } = useSearch();\n\n  if (loading) {\n    return <Progress />;\n  }\n  if (error) {\n    return (\n      <ResponseErrorPanel\n        title=\"Error encountered while fetching search results\"\n        error={error}\n      />\n    );\n  }\n\n  if (!value?.results.length) {\n    return <EmptyState missing=\"data\" title=\"Sorry, no results were found\" />;\n  }\n\n  return <>{children({ results: value.results })}</>;\n};\n\nexport { SearchResultComponent as SearchResult };\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Button, makeStyles } from '@material-ui/core';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport React from 'react';\nimport { useSearch } from '../SearchContext';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    gap: theme.spacing(2),\n    margin: theme.spacing(2, 0),\n  },\n}));\n\nexport const SearchResultPager = () => {\n  const { fetchNextPage, fetchPreviousPage } = useSearch();\n  const classes = useStyles();\n\n  if (!fetchNextPage && !fetchPreviousPage) {\n    return <></>;\n  }\n\n  return (\n    <nav arial-label=\"pagination navigation\" className={classes.root}>\n      <Button\n        aria-label=\"previous page\"\n        disabled={!fetchPreviousPage}\n        onClick={fetchPreviousPage}\n        startIcon={<ArrowBackIosIcon />}\n      >\n        Previous\n      </Button>\n\n      <Button\n        aria-label=\"next page\"\n        disabled={!fetchNextPage}\n        onClick={fetchNextPage}\n        endIcon={<ArrowForwardIosIcon />}\n      >\n        Next\n      </Button>\n    </nav>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SearchClient, searchApiRef } from './apis';\nimport {\n  createApiFactory,\n  createPlugin,\n  createRouteRef,\n  createRoutableExtension,\n  discoveryApiRef,\n  createComponentExtension,\n  identityApiRef,\n} from '@backstage/core-plugin-api';\n\nexport const rootRouteRef = createRouteRef({\n  id: 'search',\n});\n\nexport const rootNextRouteRef = createRouteRef({\n  id: 'search:next',\n});\n\nexport const searchPlugin = createPlugin({\n  id: 'search',\n  apis: [\n    createApiFactory({\n      api: searchApiRef,\n      deps: { discoveryApi: discoveryApiRef, identityApi: identityApiRef },\n      factory: ({ discoveryApi, identityApi }) => {\n        return new SearchClient({ discoveryApi, identityApi });\n      },\n    }),\n  ],\n  routes: {\n    root: rootRouteRef,\n    nextRoot: rootNextRouteRef,\n  },\n});\n\nexport const SearchPage = searchPlugin.provide(\n  createRoutableExtension({\n    name: 'SearchPage',\n    component: () => import('./components/SearchPage').then(m => m.SearchPage),\n    mountPoint: rootRouteRef,\n  }),\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchPage /> component instead. This component will be removed in an\n * upcoming release.\n */\nexport const SearchPageNext = searchPlugin.provide(\n  createRoutableExtension({\n    name: 'SearchPageNext',\n    component: () => import('./components/SearchPage').then(m => m.SearchPage),\n    mountPoint: rootNextRouteRef,\n  }),\n);\n\nexport const SearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchBar',\n    component: {\n      lazy: () => import('./components/SearchBar').then(m => m.SearchBar),\n    },\n  }),\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchBar /> component instead. This component will be removed in an\n * upcoming release.\n */\nexport const SearchBarNext = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchBarNext',\n    component: {\n      lazy: () => import('./components/SearchBar').then(m => m.SearchBar),\n    },\n  }),\n);\n\nexport const SearchResult = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchResult',\n    component: {\n      lazy: () => import('./components/SearchResult').then(m => m.SearchResult),\n    },\n  }),\n);\n\n/**\n * @deprecated This component was used for rapid prototyping of the Backstage\n * Search platform. Now that the API has stabilized, you should use the\n * <SearchResult /> component instead. This component will be removed in an\n * upcoming release.\n */\nexport const SearchResultNext = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SearchResultNext',\n    component: {\n      lazy: () => import('./components/SearchResult').then(m => m.SearchResult),\n    },\n  }),\n);\n\nexport const SidebarSearchModal = searchPlugin.provide(\n  createComponentExtension({\n    name: 'SidebarSearchModal',\n    component: {\n      lazy: () =>\n        import('./components/SidebarSearchModal').then(\n          m => m.SidebarSearchModal,\n        ),\n    },\n  }),\n);\n\nexport const DefaultResultListItem = searchPlugin.provide(\n  createComponentExtension({\n    name: 'DefaultResultListItem',\n    component: {\n      lazy: () =>\n        import('./components/DefaultResultListItem').then(\n          m => m.DefaultResultListItem,\n        ),\n    },\n  }),\n);\n\nexport const HomePageSearchBar = searchPlugin.provide(\n  createComponentExtension({\n    name: 'HomePageSearchBar',\n    component: {\n      lazy: () =>\n        import('./components/HomePageComponent').then(m => m.HomePageSearchBar),\n    },\n  }),\n);\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Grid,\n  List,\n  Paper,\n  useTheme,\n} from '@material-ui/core';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SearchBar } from '../SearchBar';\nimport { DefaultResultListItem } from '../DefaultResultListItem';\nimport { SearchResult } from '../SearchResult';\nimport { SearchContextProvider, useSearch } from '../SearchContext';\nimport { SearchResultPager } from '../SearchResultPager';\nimport { useRouteRef } from '@backstage/core-plugin-api';\nimport { Link, useContent } from '@backstage/core-components';\nimport { rootRouteRef } from '../../plugin';\n\nexport interface SearchModalProps {\n  /**\n   * If true, it renders the modal.\n   */\n  open?: boolean;\n  /**\n   * This is supposed to be used together with the open prop.\n   * If `hidden` is true, it hides the modal.\n   * If `open` is false, the value of `hidden` has no effect on the modal.\n   * Use `open` for controlling whether the modal should be rendered or not.\n   */\n  hidden?: boolean;\n  /**\n   * a function invoked when a search item is pressed or when the dialog\n   * should be closed.\n   */\n  toggleModal: () => void;\n}\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    borderRadius: 30,\n    display: 'flex',\n    height: '2.4em',\n  },\n  input: {\n    flex: 1,\n  },\n  // Reduces default height of the modal, keeping a gap of 128px between the top and bottom of the page.\n  paperFullWidth: { height: 'calc(100% - 128px)' },\n  dialogActionsContainer: { padding: theme.spacing(1, 3) },\n  viewResultsLink: { verticalAlign: '0.5em' },\n}));\n\nexport const Modal = ({ toggleModal }: SearchModalProps) => {\n  const getSearchLink = useRouteRef(rootRouteRef);\n  const classes = useStyles();\n\n  const { term } = useSearch();\n  const { focusContent } = useContent();\n  const { transitions } = useTheme();\n\n  const handleResultClick = () => {\n    toggleModal();\n    setTimeout(focusContent, transitions.duration.leavingScreen);\n  };\n\n  const handleKeyPress = () => {\n    handleResultClick();\n  };\n\n  return (\n    <>\n      <DialogTitle>\n        <Paper className={classes.container}>\n          <SearchBar className={classes.input} />\n        </Paper>\n      </DialogTitle>\n      <DialogContent>\n        <Grid\n          container\n          direction=\"row-reverse\"\n          justifyContent=\"flex-start\"\n          alignItems=\"center\"\n        >\n          <Grid item>\n            <Link\n              onClick={() => {\n                toggleModal();\n                setTimeout(focusContent, transitions.duration.leavingScreen);\n              }}\n              to={`${getSearchLink()}?query=${term}`}\n            >\n              <span className={classes.viewResultsLink}>View Full Results</span>\n              <LaunchIcon color=\"primary\" />\n            </Link>\n          </Grid>\n        </Grid>\n        <Divider />\n        <SearchResult>\n          {({ results }) => (\n            <List>\n              {results.map(({ document }) => (\n                <div\n                  role=\"button\"\n                  tabIndex={0}\n                  key={`${document.location}-btn`}\n                  onClick={handleResultClick}\n                  onKeyPress={handleKeyPress}\n                >\n                  <DefaultResultListItem\n                    key={document.location}\n                    result={document}\n                  />\n                </div>\n              ))}\n            </List>\n          )}\n        </SearchResult>\n      </DialogContent>\n      <DialogActions className={classes.dialogActionsContainer}>\n        <Grid container direction=\"row\">\n          <Grid item xs={12}>\n            <SearchResultPager />\n          </Grid>\n        </Grid>\n      </DialogActions>\n    </>\n  );\n};\n\nexport const SearchModal = ({\n  open = true,\n  hidden,\n  toggleModal,\n}: SearchModalProps) => {\n  const classes = useStyles();\n\n  return (\n    <Dialog\n      classes={{\n        paperFullWidth: classes.paperFullWidth,\n      }}\n      onClose={toggleModal}\n      aria-labelledby=\"search-modal-title\"\n      fullWidth\n      maxWidth=\"lg\"\n      open={open}\n      hidden={hidden}\n    >\n      {open && (\n        <SearchContextProvider>\n          <Modal toggleModal={toggleModal} />\n        </SearchContextProvider>\n      )}\n    </Dialog>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useState } from 'react';\n\n/**\n * Use this hook to manage the state of {@link SearchModal}\n * and change its visibility.\n *\n * @public\n *\n * @param initialState - pass `true` to make the modal initially visible\n * @returns an object containing the state of the modal together with\n * functions for changing the visibility of the modal.\n */\nexport function useSearchModal(initialState = false) {\n  const [state, setState] = useState({\n    hidden: !initialState,\n    open: initialState,\n  });\n\n  const toggleModal = useCallback(\n    () =>\n      setState(prevState => ({\n        open: true,\n        hidden: !prevState.hidden,\n      })),\n    [],\n  );\n\n  const setOpen = useCallback(\n    (open: boolean) =>\n      setState(prevState => ({\n        open: prevState.open || open,\n        hidden: !open,\n      })),\n    [],\n  );\n\n  return { state, toggleModal, setOpen };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper } from '@material-ui/core';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ClearButton from '@material-ui/icons/Clear';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  input: {\n    flex: 1,\n  },\n}));\n\ntype SearchBarProps = {\n  searchQuery: string;\n  handleSearch: any;\n  handleClearSearchBar: any;\n};\n\nexport const SearchBar = ({\n  searchQuery,\n  handleSearch,\n  handleClearSearchBar,\n}: SearchBarProps) => {\n  const classes = useStyles();\n\n  return (\n    <Paper\n      component=\"form\"\n      onSubmit={e => handleSearch(e)}\n      className={classes.root}\n    >\n      <IconButton disabled type=\"submit\" aria-label=\"search\">\n        <SearchIcon />\n      </IconButton>\n      <InputBase\n        className={classes.input}\n        placeholder=\"Search in Backstage\"\n        value={searchQuery}\n        onChange={e => handleSearch(e)}\n        inputProps={{ 'aria-label': 'search backstage' }}\n      />\n      <IconButton aria-label=\"search\" onClick={() => handleClearSearchBar()}>\n        <ClearButton />\n      </IconButton>\n    </Paper>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { makeStyles, IconButton, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    width: '250px',\n    display: 'flex',\n  },\n  icon: {\n    margin: theme.spacing(-1, 0, 0, 0),\n  },\n}));\n\ntype FiltersButtonProps = {\n  numberOfSelectedFilters: number;\n  handleToggleFilters: () => void;\n};\n\nexport const FiltersButton = ({\n  numberOfSelectedFilters,\n  handleToggleFilters,\n}: FiltersButtonProps) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.filters}>\n      <IconButton\n        className={classes.icon}\n        aria-label=\"settings\"\n        onClick={handleToggleFilters}\n      >\n        <FilterListIcon />\n      </IconButton>\n      <Typography variant=\"h6\">\n        Filters ({numberOfSelectedFilters ? numberOfSelectedFilters : 0})\n      </Typography>\n    </div>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  makeStyles,\n  Typography,\n  Divider,\n  Card,\n  CardHeader,\n  Button,\n  CardContent,\n  Select,\n  Checkbox,\n  List,\n  ListItem,\n  ListItemText,\n  MenuItem,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  filters: {\n    background: 'transparent',\n    boxShadow: '0px 0px 0px 0px',\n  },\n  checkbox: {\n    padding: theme.spacing(0, 1, 0, 1),\n  },\n  dropdown: {\n    width: '100%',\n  },\n}));\n\nexport type FiltersState = {\n  selected: string;\n  checked: Array<string>;\n};\n\nexport type FilterOptions = {\n  kind: Array<string>;\n  lifecycle: Array<string>;\n};\n\ntype FiltersProps = {\n  filters: FiltersState;\n  filterOptions: FilterOptions;\n  resetFilters: () => void;\n  updateSelected: (filter: string) => void;\n  updateChecked: (filter: string) => void;\n};\n\nexport const Filters = ({\n  filters,\n  filterOptions,\n  resetFilters,\n  updateSelected,\n  updateChecked,\n}: FiltersProps) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.filters}>\n      <CardHeader\n        title={<Typography variant=\"h6\">Filters</Typography>}\n        action={\n          <Button color=\"primary\" onClick={() => resetFilters()}>\n            CLEAR ALL\n          </Button>\n        }\n      />\n      <Divider />\n      {filterOptions.kind.length === 0 && filterOptions.lifecycle.length === 0 && (\n        <CardContent>\n          <Typography variant=\"subtitle2\">\n            Filters cannot be applied to available results\n          </Typography>\n        </CardContent>\n      )}\n      {filterOptions.kind.length > 0 && (\n        <CardContent>\n          <Typography variant=\"subtitle2\">Kind</Typography>\n          <Select\n            id=\"outlined-select\"\n            onChange={(e: React.ChangeEvent<any>) =>\n              updateSelected(e?.target?.value)\n            }\n            variant=\"outlined\"\n            className={classes.dropdown}\n            value={filters.selected}\n          >\n            {filterOptions.kind.map(filter => (\n              <MenuItem\n                selected={filter === ''}\n                dense\n                key={filter}\n                value={filter}\n              >\n                {filter}\n              </MenuItem>\n            ))}\n          </Select>\n        </CardContent>\n      )}\n      {filterOptions.lifecycle.length > 0 && (\n        <CardContent>\n          <Typography variant=\"subtitle2\">Lifecycle</Typography>\n          <List disablePadding dense>\n            {filterOptions.lifecycle.map(filter => (\n              <ListItem\n                key={filter}\n                dense\n                button\n                onClick={() => updateChecked(filter)}\n              >\n                <Checkbox\n                  edge=\"start\"\n                  disableRipple\n                  className={classes.checkbox}\n                  color=\"primary\"\n                  checked={filters.checked.includes(filter)}\n                  tabIndex={-1}\n                  value={filter}\n                  name={filter}\n                />\n                <ListItemText id={filter} primary={filter} />\n              </ListItem>\n            ))}\n          </List>\n        </CardContent>\n      )}\n    </Card>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport React, { useEffect, useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { catalogApiRef } from '@backstage/plugin-catalog-react';\n\nimport { Filters, FiltersButton, FiltersState } from './Filters';\nimport { Entity, DEFAULT_NAMESPACE } from '@backstage/catalog-model';\n\nimport {\n  EmptyState,\n  Link,\n  Progress,\n  Table,\n  TableColumn,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\ntype Result = {\n  name: string;\n  description: string | undefined;\n  owner: string | undefined;\n  kind: string;\n  lifecycle: string | undefined;\n  url: string;\n};\ntype SearchResults = Array<Result>;\n\nconst useStyles = makeStyles(theme => ({\n  searchQuery: {\n    color: theme.palette.text.primary,\n    background: theme.palette.background.default,\n    borderRadius: '10%',\n  },\n  tableHeader: {\n    margin: theme.spacing(1, 0, 0, 0),\n    display: 'flex',\n  },\n  divider: {\n    width: '1px',\n    margin: theme.spacing(0, 2),\n    padding: theme.spacing(2, 0),\n  },\n}));\n\ntype SearchResultProps = {\n  searchQuery?: string;\n};\n\ntype TableHeaderProps = {\n  searchQuery?: string;\n  numberOfSelectedFilters: number;\n  numberOfResults: number;\n  handleToggleFilters: () => void;\n};\n\n// TODO: move out column to make the search result component more generic\nconst columns: TableColumn[] = [\n  {\n    title: 'Name',\n    field: 'name',\n    highlight: true,\n    render: (result: Partial<Result>) => (\n      <Link to={result.url || ''}>{result.name}</Link>\n    ),\n  },\n  {\n    title: 'Description',\n    field: 'description',\n  },\n  {\n    title: 'Owner',\n    field: 'owner',\n  },\n  {\n    title: 'Kind',\n    field: 'kind',\n  },\n  {\n    title: 'LifeCycle',\n    field: 'lifecycle',\n  },\n];\n\nconst TableHeader = ({\n  searchQuery,\n  numberOfSelectedFilters,\n  numberOfResults,\n  handleToggleFilters,\n}: TableHeaderProps) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.tableHeader}>\n      <FiltersButton\n        numberOfSelectedFilters={numberOfSelectedFilters}\n        handleToggleFilters={handleToggleFilters}\n      />\n      <Divider className={classes.divider} orientation=\"vertical\" />\n      <Grid item xs={12}>\n        {searchQuery ? (\n          <Typography variant=\"h6\">\n            {`${numberOfResults} `}\n            {numberOfResults > 1 ? `results for ` : `result for `}\n            <span className={classes.searchQuery}>\"{searchQuery}\"</span>{' '}\n          </Typography>\n        ) : (\n          <Typography variant=\"h6\">{`${numberOfResults} results`}</Typography>\n        )}\n      </Grid>\n    </div>\n  );\n};\n\nexport const SearchResult = ({ searchQuery }: SearchResultProps) => {\n  const catalogApi = useApi(catalogApiRef);\n\n  const [showFilters, toggleFilters] = useState(false);\n  const [selectedFilters, setSelectedFilters] = useState<FiltersState>({\n    selected: '',\n    checked: [],\n  });\n\n  const [filteredResults, setFilteredResults] = useState<SearchResults>([]);\n\n  const {\n    loading,\n    error,\n    value: results,\n  } = useAsync(async () => {\n    const entities = await catalogApi.getEntities();\n    return entities.items.map((entity: Entity) => ({\n      name: entity.metadata.name,\n      description: entity.metadata.description,\n      owner:\n        typeof entity.spec?.owner === 'string' ? entity.spec?.owner : undefined,\n      kind: entity.kind,\n      lifecycle:\n        typeof entity.spec?.lifecycle === 'string'\n          ? entity.spec?.lifecycle\n          : undefined,\n      url: `/catalog/${\n        entity.metadata.namespace?.toLocaleLowerCase('en-US') ||\n        DEFAULT_NAMESPACE\n      }/${entity.kind.toLocaleLowerCase('en-US')}/${entity.metadata.name}`,\n    }));\n  }, []);\n\n  useEffect(() => {\n    if (results) {\n      let withFilters = results;\n\n      // apply filters\n\n      // filter on selected\n      if (selectedFilters.selected !== '') {\n        withFilters = results.filter((result: Result) =>\n          selectedFilters.selected.includes(result.kind),\n        );\n      }\n\n      // filter on checked\n      if (selectedFilters.checked.length > 0) {\n        withFilters = withFilters.filter(\n          (result: Result) =>\n            result.lifecycle &&\n            selectedFilters.checked.includes(result.lifecycle),\n        );\n      }\n\n      // filter on searchQuery\n      if (searchQuery) {\n        withFilters = withFilters.filter(\n          (result: Result) =>\n            result.name?.toLocaleLowerCase('en-US').includes(searchQuery) ||\n            result.name\n              ?.toLocaleLowerCase('en-US')\n              .includes(searchQuery.split(' ').join('-')) ||\n            result.description\n              ?.toLocaleLowerCase('en-US')\n              .includes(searchQuery),\n        );\n      }\n\n      setFilteredResults(withFilters);\n    }\n  }, [selectedFilters, searchQuery, results]);\n  if (loading) {\n    return <Progress />;\n  }\n  if (error) {\n    return (\n      <Alert severity=\"error\">\n        Error encountered while fetching search results. {error.toString()}\n      </Alert>\n    );\n  }\n  if (!results || results.length === 0) {\n    return <EmptyState missing=\"data\" title=\"Sorry, no results were found\" />;\n  }\n\n  const resetFilters = () => {\n    setSelectedFilters({\n      selected: '',\n      checked: [],\n    });\n  };\n\n  const updateSelected = (filter: string) => {\n    setSelectedFilters(prevState => ({\n      ...prevState,\n      selected: filter,\n    }));\n  };\n\n  const updateChecked = (filter: string) => {\n    if (selectedFilters.checked.includes(filter)) {\n      setSelectedFilters(prevState => ({\n        ...prevState,\n        checked: prevState.checked.filter(item => item !== filter),\n      }));\n      return;\n    }\n\n    setSelectedFilters(prevState => ({\n      ...prevState,\n      checked: [...prevState.checked, filter],\n    }));\n  };\n\n  const filterOptions = results.reduce(\n    (acc, curr) => {\n      if (curr.kind && acc.kind.indexOf(curr.kind) < 0) {\n        acc.kind.push(curr.kind);\n      }\n      if (curr.lifecycle && acc.lifecycle.indexOf(curr.lifecycle) < 0) {\n        acc.lifecycle.push(curr.lifecycle);\n      }\n      return acc;\n    },\n    {\n      kind: [] as Array<string>,\n      lifecycle: [] as Array<string>,\n    },\n  );\n\n  return (\n    <>\n      <Grid container>\n        {showFilters && (\n          <Grid item xs={3}>\n            <Filters\n              filters={selectedFilters}\n              filterOptions={filterOptions}\n              resetFilters={resetFilters}\n              updateSelected={updateSelected}\n              updateChecked={updateChecked}\n            />\n          </Grid>\n        )}\n        <Grid item xs={showFilters ? 9 : 12}>\n          <Table\n            options={{ paging: true, pageSize: 20, search: false }}\n            data={filteredResults}\n            columns={columns}\n            title={\n              <TableHeader\n                searchQuery={searchQuery}\n                numberOfResults={filteredResults.length}\n                numberOfSelectedFilters={\n                  (selectedFilters.selected !== '' ? 1 : 0) +\n                  selectedFilters.checked.length\n                }\n                handleToggleFilters={() => toggleFilters(!showFilters)}\n              />\n            }\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Grid } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport { SearchBar } from './LegacySearchBar';\nimport { SearchResult } from './LegacySearchResult';\nimport {\n  Content,\n  Header,\n  Page,\n  useQueryParamState,\n} from '@backstage/core-components';\n\n/**\n * @deprecated This SearchPage, powered directly by the Catalog API, will be\n * removed from a future release of this plugin.\n */\nexport const LegacySearchPage = () => {\n  const [queryString, setQueryString] = useQueryParamState<string>('query');\n  const [searchQuery, setSearchQuery] = useState(queryString ?? '');\n\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\n    event.preventDefault();\n    setSearchQuery(event.target.value);\n  };\n\n  useEffect(() => setSearchQuery(queryString ?? ''), [queryString]);\n\n  useDebounce(\n    () => {\n      setQueryString(searchQuery);\n    },\n    200,\n    [searchQuery],\n  );\n\n  const handleClearSearchBar = () => {\n    setSearchQuery('');\n  };\n\n  return (\n    <Page themeId=\"home\">\n      <Header title=\"Search\" />\n      <Content>\n        <Grid container direction=\"row\">\n          <Grid item xs={12}>\n            <SearchBar\n              handleSearch={handleSearch}\n              handleClearSearchBar={handleClearSearchBar}\n              searchQuery={searchQuery}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <SearchResult\n              searchQuery={(queryString ?? '').toLocaleLowerCase('en-US')}\n            />\n          </Grid>\n        </Grid>\n      </Content>\n    </Page>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport qs from 'qs';\nimport { useLocation, useOutlet } from 'react-router';\nimport { SearchContextProvider, useSearch } from '../SearchContext';\nimport { JsonObject } from '@backstage/types';\nimport { LegacySearchPage } from '../LegacySearchPage';\n\nexport const UrlUpdater = () => {\n  const location = useLocation();\n  const {\n    term,\n    setTerm,\n    types,\n    setTypes,\n    pageCursor,\n    setPageCursor,\n    filters,\n    setFilters,\n  } = useSearch();\n\n  const prevQueryParams = usePrevious(location.search);\n  useEffect(() => {\n    // Only respond to changes to url query params\n    if (location.search === prevQueryParams) {\n      return;\n    }\n\n    const query =\n      qs.parse(location.search.substring(1), { arrayLimit: 0 }) || {};\n\n    if (query.filters) {\n      setFilters(query.filters as JsonObject);\n    }\n\n    if (query.query) {\n      setTerm(query.query as string);\n    }\n\n    if (query.pageCursor) {\n      setPageCursor(query.pageCursor as string);\n    }\n\n    if (query.types) {\n      setTypes(query.types as string[]);\n    }\n  }, [prevQueryParams, location, setTerm, setTypes, setPageCursor, setFilters]);\n\n  useEffect(() => {\n    const newParams = qs.stringify(\n      {\n        query: term,\n        types,\n        pageCursor,\n        filters,\n      },\n      { arrayFormat: 'brackets' },\n    );\n    const newUrl = `${window.location.pathname}?${newParams}`;\n\n    // We directly manipulate window history here in order to not re-render\n    // infinitely (state => location => state => etc). The intention of this\n    // code is just to ensure the right query/filters are loaded when a user\n    // clicks the \"back\" button after clicking a result.\n    window.history.replaceState(null, document.title, newUrl);\n  }, [term, types, pageCursor, filters]);\n\n  return null;\n};\n\nexport const SearchPage = () => {\n  const outlet = useOutlet();\n\n  return (\n    <SearchContextProvider>\n      <UrlUpdater />\n      {outlet || <LegacySearchPage />}\n    </SearchContextProvider>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { cloneElement, Fragment, useEffect, useState } from 'react';\nimport { useSearch } from '../SearchContext';\nimport {\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  makeStyles,\n} from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AllIcon from '@material-ui/icons/FontDownload';\n\nconst useStyles = makeStyles(theme => ({\n  card: {\n    backgroundColor: 'rgba(0, 0, 0, .11)',\n  },\n  cardContent: {\n    paddingTop: theme.spacing(1),\n  },\n  icon: {\n    color: theme.palette.common.black,\n  },\n  list: {\n    width: '100%',\n  },\n  listItemIcon: {\n    width: '24px',\n    height: '24px',\n  },\n  accordion: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  accordionSummary: {\n    minHeight: 'auto',\n    '&.Mui-expanded': {\n      minHeight: 'auto',\n    },\n  },\n  accordionSummaryContent: {\n    margin: theme.spacing(2, 0),\n    '&.Mui-expanded': {\n      margin: theme.spacing(2, 0),\n    },\n  },\n  accordionDetails: {\n    padding: theme.spacing(0, 0, 1),\n  },\n}));\n\n/**\n * @public\n */\nexport type SearchTypeAccordionProps = {\n  name: string;\n  types: Array<{\n    value: string;\n    name: string;\n    icon: JSX.Element;\n  }>;\n  defaultValue?: string;\n};\n\nexport const SearchTypeAccordion = (props: SearchTypeAccordionProps) => {\n  const classes = useStyles();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const [expanded, setExpanded] = useState(true);\n  const { defaultValue, name, types: givenTypes } = props;\n\n  const toggleExpanded = () => setExpanded(prevState => !prevState);\n  const handleClick = (type: string) => {\n    return () => {\n      setTypes(type !== '' ? [type] : []);\n      setPageCursor(undefined);\n      setExpanded(false);\n    };\n  };\n\n  // Handle any provided defaultValue\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const definedTypes = [\n    {\n      value: '',\n      name: 'All',\n      icon: <AllIcon />,\n    },\n    ...givenTypes,\n  ];\n  const selected = types[0] || '';\n\n  return (\n    <Card className={classes.card}>\n      <CardHeader title={name} titleTypographyProps={{ variant: 'overline' }} />\n      <CardContent className={classes.cardContent}>\n        <Accordion\n          className={classes.accordion}\n          expanded={expanded}\n          onChange={toggleExpanded}\n        >\n          <AccordionSummary\n            classes={{\n              root: classes.accordionSummary,\n              content: classes.accordionSummaryContent,\n            }}\n            expandIcon={<ExpandMoreIcon className={classes.icon} />}\n            IconButtonProps={{ size: 'small' }}\n          >\n            {expanded\n              ? 'Collapse'\n              : definedTypes.filter(t => t.value === selected)[0]!.name}\n          </AccordionSummary>\n          <AccordionDetails classes={{ root: classes.accordionDetails }}>\n            <List\n              className={classes.list}\n              component=\"nav\"\n              aria-label=\"filter by type\"\n              disablePadding\n              dense\n            >\n              {definedTypes.map(type => (\n                <Fragment key={type.value}>\n                  <Divider />\n                  <ListItem\n                    selected={\n                      types[0] === type.value ||\n                      (types.length === 0 && type.value === '')\n                    }\n                    onClick={handleClick(type.value)}\n                    button\n                  >\n                    <ListItemIcon>\n                      {cloneElement(type.icon, {\n                        className: classes.listItemIcon,\n                      })}\n                    </ListItemIcon>\n                    <ListItemText primary={type.name} />\n                  </ListItem>\n                </Fragment>\n              ))}\n            </List>\n          </AccordionDetails>\n        </Accordion>\n      </CardContent>\n    </Card>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useSearch } from '../SearchContext';\nimport { BackstageTheme } from '@backstage/theme';\nimport { makeStyles, Tab, Tabs } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: BackstageTheme) => ({\n  tabs: {\n    borderBottom: `1px solid ${theme.palette.textVerySubtle}`,\n    padding: theme.spacing(0, 4),\n  },\n  tab: {\n    height: '50px',\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.pxToRem(13),\n    color: theme.palette.textSubtle,\n    minWidth: '130px',\n  },\n}));\n\n/**\n * @public\n */\nexport type SearchTypeTabsProps = {\n  types: Array<{\n    value: string;\n    name: string;\n  }>;\n  defaultValue?: string;\n};\n\nexport const SearchTypeTabs = (props: SearchTypeTabsProps) => {\n  const classes = useStyles();\n  const { setPageCursor, setTypes, types } = useSearch();\n  const { defaultValue, types: givenTypes } = props;\n\n  const changeTab = (_: React.ChangeEvent<{}>, newType: string) => {\n    setTypes(newType !== '' ? [newType] : []);\n    setPageCursor(undefined);\n  };\n\n  // Handle any provided defaultValue\n  useEffect(() => {\n    if (defaultValue) {\n      setTypes([defaultValue]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const definedTypes = [\n    {\n      value: '',\n      name: 'All',\n    },\n    ...givenTypes,\n  ];\n\n  return (\n    <Tabs\n      className={classes.tabs}\n      indicatorColor=\"primary\"\n      value={types.length === 0 ? '' : types[0]}\n      onChange={changeTab}\n    >\n      {definedTypes.map(type => (\n        <Tab\n          className={classes.tab}\n          disableRipple\n          label={type.name}\n          value={type.value}\n        />\n      ))}\n    </Tabs>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  Checkbox,\n  Chip,\n  FormControl,\n  InputLabel,\n  ListItemText,\n  makeStyles,\n  MenuItem,\n  Select,\n} from '@material-ui/core';\nimport React, { ChangeEvent } from 'react';\nimport useEffectOnce from 'react-use/lib/useEffectOnce';\nimport {\n  SearchTypeAccordion,\n  SearchTypeAccordionProps,\n} from './SearchType.Accordion';\nimport { SearchTypeTabs, SearchTypeTabsProps } from './SearchType.Tabs';\nimport { useSearch } from '../SearchContext';\n\nconst useStyles = makeStyles(theme => ({\n  label: {\n    textTransform: 'capitalize',\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginTop: theme.spacing(1),\n  },\n  chip: {\n    margin: 2,\n  },\n}));\n\n/**\n * @public\n */\nexport type SearchTypeProps = {\n  className?: string;\n  name: string;\n  values?: string[];\n  defaultValue?: string[] | string | null;\n};\n\nconst SearchType = (props: SearchTypeProps) => {\n  const { className, defaultValue, name, values = [] } = props;\n  const classes = useStyles();\n  const { types, setTypes } = useSearch();\n\n  useEffectOnce(() => {\n    if (!types.length) {\n      if (defaultValue && Array.isArray(defaultValue)) {\n        setTypes(defaultValue);\n      } else if (defaultValue) {\n        setTypes([defaultValue]);\n      }\n    }\n  });\n\n  const handleChange = (e: ChangeEvent<{ value: unknown }>) => {\n    const value = e.target.value as string[];\n    setTypes(value as string[]);\n  };\n\n  return (\n    <FormControl\n      className={className}\n      variant=\"filled\"\n      fullWidth\n      data-testid=\"search-typefilter-next\"\n    >\n      <InputLabel className={classes.label} margin=\"dense\">\n        {name}\n      </InputLabel>\n      <Select\n        multiple\n        variant=\"outlined\"\n        value={types}\n        onChange={handleChange}\n        placeholder=\"All Results\"\n        renderValue={selected => (\n          <div className={classes.chips}>\n            {(selected as string[]).map(value => (\n              <Chip\n                key={value}\n                label={value}\n                className={classes.chip}\n                size=\"small\"\n              />\n            ))}\n          </div>\n        )}\n      >\n        {values.map((value: string) => (\n          <MenuItem key={value} value={value}>\n            <Checkbox checked={types.indexOf(value) > -1} />\n            <ListItemText primary={value} />\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n};\n\n/**\n * A control surface for the search query's \"types\" property, displayed as a\n * single-select collapsible accordion suitable for use in faceted search UIs.\n * @public\n */\nSearchType.Accordion = (props: SearchTypeAccordionProps) => {\n  return <SearchTypeAccordion {...props} />;\n};\n\n/**\n * A control surface for the search query's \"types\" property, displayed as a\n * tabs suitable for use in faceted search UIs.\n * @public\n */\nSearchType.Tabs = (props: SearchTypeTabsProps) => {\n  return <SearchTypeTabs {...props} />;\n};\n\nexport { SearchType };\nexport type { SearchTypeAccordionProps, SearchTypeTabsProps };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport qs from 'qs';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { rootRouteRef } from '../../plugin';\n\nimport { useRouteRef, IconComponent } from '@backstage/core-plugin-api';\nimport { SidebarSearchField, useContent } from '@backstage/core-components';\n\nexport type SidebarSearchProps = {\n  icon?: IconComponent;\n};\n\nexport const SidebarSearch = (props: SidebarSearchProps) => {\n  const searchRoute = useRouteRef(rootRouteRef);\n  const { focusContent } = useContent();\n  const navigate = useNavigate();\n  const handleSearch = useCallback(\n    (query: string): void => {\n      const queryString = qs.stringify({ query }, { addQueryPrefix: true });\n      focusContent();\n      navigate(`${searchRoute()}${queryString}`);\n    },\n    [focusContent, navigate, searchRoute],\n  );\n\n  return (\n    <SidebarSearchField\n      icon={props.icon}\n      onSearch={handleSearch}\n      to=\"/search\"\n    />\n  );\n};\n"],"names":["useStyles","FiltersButton","Filters","SearchBar","DefaultResultListItem","SearchPage","SearchResult","makeStyles","IconButton","InputBase"],"mappings":"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"}